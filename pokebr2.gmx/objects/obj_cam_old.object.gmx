<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_vis_cam</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///3D STUFF
d3d_start();

draw_set_alpha_test(true)
draw_set_alpha_test_ref_value(40) //40
d3d_set_hidden(true)

x =         room_width/2;
y =         room_height*1.08//1034//room_height+80 //room_height+80
z =         (global.width*64)/1024 //64

xnext =     x;
ynext =     y;
znext =     z;

z+= (global.width*20)/1024 //This fixes it for some reason

direction = 90;

shake =     0

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///DEV MODE STUFF
global.dev = 1  

global.fog =            false
global.screenshake =    false

if debug_mode = true
    {
    window_set_fullscreen(false)
    window_set_size(960,480)
    }
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///TEMPORAL
camera_mode =   "follow" //fixed, follow
movement_mode = "free" //grid, free
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>201</id>
        <kind>0</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_create_object</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>10</kind>
            <object>obj_char</object>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>friction =  1

if camera_mode = "follow" &amp;&amp; movement_mode = "noexist"
    {
    if x &gt; obj_char.x
        x -= 5
    if x &lt; obj_char.x
        x += 5
        
    if direction &gt; 0.1875*obj_char.x+69
        direction -= 5
    if direction &lt; 0.1875*obj_char.x+69
        direction += 5
    }
    
if camera_mode = "follow"
    {
    x = obj_char.x
    direction = 0.1875*(global.width*(obj_char.x+69))/1024//0.1875*obj_char.x+69 //&lt;-- for 224 width //0.2*obj_char.x+64 &lt;-- for 265 width
    }
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///DEV MODE FUNCTIONS
if global.dev = 1
    {
    if keyboard_check(ord("T")) {speed = 6}     //Move forward &amp; backwards
    if keyboard_check(ord("G")) {speed = -6}
    
    if keyboard_check(ord("H")) {x += 1}        //Move sideways
    if keyboard_check(ord("F")) {x -= 1}
    
    if keyboard_check(ord("I")) {z += 1}        //Frontal panning
    if keyboard_check(ord("K")) {z -= 1}
    
    if keyboard_check(ord("J")) {direction += 1}        //Sideways panning
    if keyboard_check(ord("L")) {direction -= 1}
    
    if keyboard_check(ord("R")) {game_restart()}  //Restarts game
    if keyboard_check(vk_escape)    {game_end()}  //Ends game
    }
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///SCREEN SHAKE AND RUMBLE
if shake &gt; 0
    {
    shake --
    gamepad_set_vibration(0, shake/30, shake/30);
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///DEV MODE STUFF

if global.dev = true
    {
    draw_set_color(c_red)
    draw_set_font(fnt_damage)
    draw_text(8,8,"Camera: "+string(camera_mode))
    draw_text(8,24,"Movement: "+string(movement_mode))
    draw_text(8,40,"x: "+string(x))
    draw_text(8,56,"y: "+string(y))
    draw_text(8,72,"z: "+string(z))
    draw_text(8,88,"dir: "+string(direction))
    draw_text(8,104,"shoot_count: "+string(obj_char.shoot_count))
    draw_text(8,120,"os type: "+string(os_type))
    draw_text(8,136,"device tilt y: "+string(device_get_tilt_y()))
    draw_text(8,152,"FPS: "+string(fps))
    if gamepad_is_connected(0)
        draw_text(8,168,"Controller LX: "+string(gamepad_axis_value(0, gp_axislh)))
    draw_text(8,8+16*11,"room_height: "+string(room_height))
    draw_text(8,8+16*12,"room_width: "+string(room_width))
    draw_text(8,8+16*13,"global.wall_size: "+string(global.wall_size))
    draw_text(8,8+16*14,"global.width: "+string(global.width))
    draw_text(8,8+16*15,"global.height: "+string(global.height))
//DevMode drawings
    if keyboard_check(vk_numpad1)
        draw_sprite_ext(spr_vis_devmode,0,0,128,2,2,0,image_blend,0.7)
    if keyboard_check(vk_numpad2)
        draw_sprite_ext(spr_vis_devmode,1,0,128,2,2,0,image_blend,0.7)
        
//DevMode Camera Modes
    if keyboard_check_pressed(ord('1'))
        camera_mode = "fixed"
    if keyboard_check_pressed(ord('2'))
        camera_mode = "follow"
    if keyboard_check_pressed(ord('3'))
        movement_mode = "grid"
    if keyboard_check_pressed(ord('4'))
        movement_mode = "free"
        
//DevMode Visuals
    if keyboard_check_pressed(ord('0')) //Slow FPS
        room_speed = 1
    if keyboard_check_released(ord('0'))
        room_speed = 60
        
    if keyboard_check_pressed(ord('9'))
        if global.fog = true
            global.fog = false
        else
            global.fog = true
        
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//direction -=    (display_mouse_get_x()-(display_get_width()/2))/5;
//znext -=        (display_mouse_get_y()-(display_get_height()/2))/2;

//display_mouse_set(display_get_width()/2,display_get_height()/2);

//Camera movement stuff

//direction = 90

//x = obj_char.x
//x = -(obj_char.x*2)+256*0.5
//direction = 90+(obj_char.x-128)/3
draw_set_alpha(1)

xnext =         lengthdir_x(100,direction)+x;
ynext =         lengthdir_y(100,direction)+y; //len = 100

draw_set_color(c_white);
d3d_set_projection(x+irandom_range(0,shake/15),y+irandom_range(0,shake/15),z+irandom_range(0,shake/15),xnext,ynext,znext,0,0,1);

//Fog
d3d_fog(global.fog)

//Lights???
//d3d_set_lighting(true)
//d3d_light_define_point(1,x,y,z,60000,c_white)
//d3d_light_enable(1,true)
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
